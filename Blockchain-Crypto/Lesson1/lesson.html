<!DOCTYPE html><html><head><meta charset="utf-8"><title>Blockchain and Bitcoin - The Basics.md</title>
	<link rel="stylesheet" href="../../styles.css"><style></style></head><body id="preview">
<div class="wrapper">
<h1 class="code-line" data-line-start=0 data-line-end=1><a id="Blockchain_and_Bitcoin__The_Basics_0"></a>Blockchain and Bitcoin - The Basics</h1>
<p class="has-line-data" data-line-start="2" data-line-end="5">While I used several sources as inspiration and references, much of this lesson comes from what I learned from reading <br>
	<i>Bitcoin Clarity</i>, by Kiara Bickers, which I will link down below. I also took much inspiration from 3Blue1Brown’s<br>
youtube video, <a href="https://www.youtube.com/watch?v=bBC-nXj3Ng4">But how does Bitcoin actually work?</a></p>
<p class="has-line-data" data-line-start="6" data-line-end="7">Table of Contents</p>
<ol>
<li class="has-line-data" data-line-start="8" data-line-end="11">Foreword - Things to know
<ol>
<li class="has-line-data" data-line-start="9" data-line-end="10">Hashes</li>
<li class="has-line-data" data-line-start="10" data-line-end="11">Public/Private Keys</li>
</ol>
</li>
<li class="has-line-data" data-line-start="11" data-line-end="12">Why, or How?</li>
<li class="has-line-data" data-line-start="12" data-line-end="23">Inventing Bitcoin
<ol>
<li class="has-line-data" data-line-start="13" data-line-end="16">A shared ledger
<ol>
<li class="has-line-data" data-line-start="14" data-line-end="15">Ordering history</li>
<li class="has-line-data" data-line-start="15" data-line-end="16">Securing transactions</li>
</ol>
</li>
<li class="has-line-data" data-line-start="16" data-line-end="19">Immutability
<ol>
<li class="has-line-data" data-line-start="17" data-line-end="18">Securing a block</li>
<li class="has-line-data" data-line-start="18" data-line-end="19">Securing the chain</li>
</ol>
</li>
<li class="has-line-data" data-line-start="19" data-line-end="22">Consensus
<ol>
<li class="has-line-data" data-line-start="20" data-line-end="21">Survival of the fittest</li>
<li class="has-line-data" data-line-start="21" data-line-end="22">Work for it (mining)</li>
</ol>
</li>
<li class="has-line-data" data-line-start="22" data-line-end="23">Analyzing the solution</li>
</ol>
</li>
<li class="has-line-data" data-line-start="23" data-line-end="28">Things we missed
<ol>
<li class="has-line-data" data-line-start="24" data-line-end="25">Nodes</li>
<li class="has-line-data" data-line-start="25" data-line-end="26">Wallets</li>
<li class="has-line-data" data-line-start="26" data-line-end="27">Transactions / UTXOs</li>
<li class="has-line-data" data-line-start="27" data-line-end="28">Merkle Trees</li>
</ol>
</li>
<li class="has-line-data" data-line-start="28" data-line-end="30">References and Relevant Links</li>
</ol>
<h2 class="code-line" data-line-start=30 data-line-end=31><a id="Foreword__Things_to_know_30"></a>Foreword - Things to know</h2>
<p class="has-line-data" data-line-start="32" data-line-end="34">I won’t get into the technicals about these things, but here’s what you need to know about certain technologies that the<br>
blockchain relies on.</p>
<ul>
<li class="has-line-data" data-line-start="35" data-line-end="36">Hashes</li>
<li class="has-line-data" data-line-start="36" data-line-end="38">Public/private key pairs</li>
</ul>
<h3 class="code-line" data-line-start=38 data-line-end=39><a id="Hashes_38"></a>Hashes</h3>
<p class="has-line-data" data-line-start="40" data-line-end="43">A hash is a mathematical function that encrypts some given value into a string of seemingly random characters of a fixed<br>
length. There are many hash algorithms, but we’ll focus on SHA-256, the algorithm used on the Bitcoin blockchain (and<br>
most of modern encryption).</p>
<p class="has-line-data" data-line-start="44" data-line-end="45">A hash function has the following properties</p>
<ul>
<li class="has-line-data" data-line-start="46" data-line-end="47">The output is a fixed length, regardless of the input</li>
<li class="has-line-data" data-line-start="47" data-line-end="48">A given input will always result in the same output (deterministic)</li>
<li class="has-line-data" data-line-start="48" data-line-end="49">A small change to the input results in a massive change to the output (seemingly random)</li>
<li class="has-line-data" data-line-start="49" data-line-end="51">The input cannot be derived from the output (irreversible, “one-way”)</li>
</ul>
<p class="has-line-data" data-line-start="51" data-line-end="52">Here’s an example:</p>
<pre><code class="has-line-data" data-line-start="54" data-line-end="58" class="language-js">SHA256(<span class="hljs-string">"Hello, world."</span>) <span class="hljs-comment">// =&gt; "f8c3bf62a9aa3e6fc1619c250e48abe7519373d3edf41be62eb5dc45199af2ef"</span>
SHA256(<span class="hljs-string">"Hello, world!"</span>) <span class="hljs-comment">// =&gt; "315f5bdb76d078c43b8ac0064e4a0164612b1fce77c869345bfc94c75894edd3"</span>
SHA256(<span class="hljs-string">"Hello"</span>)         <span class="hljs-comment">// =&gt; "185f8db32271fe25f561a6fc938b2e264306ec304eda518007d1764826381969"</span>
</code></pre>
<h3 class="code-line" data-line-start=59 data-line-end=60><a id="PublicPrivate_key_pairs_59"></a>Public/Private key pairs</h3>
<p class="has-line-data" data-line-start="61" data-line-end="65">Naturally, the “Crypto” part of “Cryptocurrency” comes from “Cryptography.” The blockchain makes heavy use of<br>
public/private key pairs and digital signatures. If you’re interested in the technical details, look up<br>
<a href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange">Diffie-Helman key pairs</a>. It’s how pretty much all<br>
encryption works these days.</p>
<p class="has-line-data" data-line-start="66" data-line-end="67">Basically think of public/private key encryption like this:</p>
<p class="has-line-data" data-line-start="68" data-line-end="72">For a given lock, there are two keys. One key is used exclusively to lock the lock. This key is publicly available to<br>
anyone in the world. The second key is used exclusively to unlock the lock, and this is kept private. Think of an<br>
electronic door lock - Anyone can go up and hit the “lock” button to keep the door locked shut, but only the person with<br>
the door code can unlock the door.</p>
<p class="has-line-data" data-line-start="73" data-line-end="74">Rather than go into the technicals of how DH key pairs work, here’s the properties that are relevant to blockchain</p>
<ul>
<li class="has-line-data" data-line-start="75" data-line-end="80">Private keys are always kept private. They are never shared or communicated to anyone.
<ul>
<li class="has-line-data" data-line-start="76" data-line-end="79">Private keys are used to digitally sign messages - this proves that a given user has actually authenticated a given<br>
message/transaction.
<ul>
<li class="has-line-data" data-line-start="78" data-line-end="79">A digital signature is unique to each message it signs</li>
</ul>
</li>
<li class="has-line-data" data-line-start="79" data-line-end="80">Private keys are used to “unlock” or “spend” bitcoin.</li>
</ul>
</li>
<li class="has-line-data" data-line-start="80" data-line-end="84">Public keys are shared public knowledge. Anyone and everyone can know what each other user’s public key is.
<ul>
<li class="has-line-data" data-line-start="81" data-line-end="82">Public keys are used to “lock” bitcoin,</li>
<li class="has-line-data" data-line-start="82" data-line-end="84">Public keys are used to verify the signature (authenticity) of a given message/transaction</li>
</ul>
</li>
</ul>
<h2 class="code-line" data-line-start=84 data-line-end=85><a id="Why_or_How_84"></a>Why, or How?</h2>
<p class="has-line-data" data-line-start="86" data-line-end="89">One of the main questions people have about Bitcoin and the blockchain is “how” - as in, “how does it work?” A better<br>
question to ask is “why” - as in, “why is it necessary,” or “why was it created?” To answer this question, I will begin<br>
by quoting the Genesis Block of Bitcoin (the very first block on the blockchain).</p>
<blockquote>
<p class="has-line-data" data-line-start="90" data-line-end="91">The Times 03/Jan/2009 Chancellor on brink of second bailout for banks</p>
</blockquote>
<p class="has-line-data" data-line-start="92" data-line-end="96">While this is only one example, it is a prime example of what drove Satoshi Nakamoto to develop bitcoin. He wanted a<br>
currency that was under no one person’s control, that instead everyone could participate in freely. The goal was a<br>
system that is both a currency, and a payment processor. A system that would allow peers to send money directly to each<br>
other, without a central authority. A system that no one person could control, and would truly belong to the people.</p>
<h2 class="code-line" data-line-start=97 data-line-end=98><a id="Inventing_bitcoin_97"></a>Inventing bitcoin</h2>
<p class="has-line-data" data-line-start="99" data-line-end="101">To understand how the blockchain works, let us consider how we might build our own system with the same properties as<br>
Bitcoin, the challenges we will face, and how we might overcome them.</p>
<p class="has-line-data" data-line-start="102" data-line-end="103">To build a system similar to Bitcoin, let us start with the following rules/properties:</p>
<ul>
<li class="has-line-data" data-line-start="104" data-line-end="105">The ledger must be publicly available</li>
<li class="has-line-data" data-line-start="105" data-line-end="106">Anyone can add transactions to the ledger</li>
<li class="has-line-data" data-line-start="106" data-line-end="107">Everyone must agree on the ledger’s contents</li>
<li class="has-line-data" data-line-start="107" data-line-end="109">No one is allowed to spend more money than they have</li>
</ul>
<p class="has-line-data" data-line-start="109" data-line-end="112">For the sake of this example, let us assume that Alice, Bob, Charlie, and Donna all put some money in the pot, and the<br>
ledger starts off with each user having 10 BTC. We will discuss later where bitcoins come from, but for now, this will<br>
do.</p>
<h3 class="code-line" data-line-start=113 data-line-end=114><a id="Step_1__A_shared_ledger_113"></a>Step 1 - A shared ledger</h3>
<p class="has-line-data" data-line-start="115" data-line-end="120">Since the goal is a public ledger, lets start with keeping a history of transactions. That way, we can ensure that each<br>
user actually has the money they say they have, and that they can’t double-spend it (they can’t hand the same dollar<br>
bill to two different people). Let’s take a lump of transactions, and put them together in a <strong>block</strong>. Great, now we’ve<br>
got a starting point. Whenever we have some new transactions to add to our ledger, we’ll create a new block, and add it<br>
on to the end.</p>
<p class="has-line-data" data-line-start="121" data-line-end="122">With that in mind, here’s our initial ledger:</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Transactions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice receives 10 BTC</td>
</tr>
<tr>
<td>Bob receives 10 BTC</td>
</tr>
<tr>
<td>Charlie receives 10 BTC</td>
</tr>
<tr>
<td>Donna receives 10 BTC</td>
</tr>
</tbody>
</table>
<h3 class="code-line" data-line-start=130 data-line-end=131><a id="Step_11__Ordering_history_130"></a>Step 1.1 - Ordering history</h3>
<p class="has-line-data" data-line-start="132" data-line-end="136">But, we’ve got a problem - these blocks need to be in order. Bob can’t send Charlie 12 BTC to purchase a widget until<br>
after Alice pays Bob the 3 BTC she owes him for lunch. So, let’s give each block an Index (and each transaction within<br>
the block, for the same reason). Great, now we’ve got the beginnings of a shared ledger. To fill it out a little more,<br>
lets have Charlie purchase a widget from Donna.</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th></th>
<th>Block 0</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice receives 10 BTC</td>
</tr>
<tr>
<td>1</td>
<td>Bob receives 10 BTC</td>
</tr>
<tr>
<td>2</td>
<td>Charlie receives 10 BTC</td>
</tr>
<tr>
<td>3</td>
<td>Donna receives 10 BTC</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th></th>
<th>Block 1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice sends Bob 3 BTC</td>
</tr>
<tr>
<td>1</td>
<td>Bob sends Charlie 12 BTC</td>
</tr>
<tr>
<td>2</td>
<td>Charlie sends Donna 3 BTC</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="150" data-line-end="152">It is worth mentioning, rather than timestamp each individual transaction, the block as a whole is timestamped, and all<br>
transactions within that block are considered to be happening at that time (in top-to-bottom order).</p>
<h3 class="code-line" data-line-start=153 data-line-end=154><a id="Step_12__Securing_transactions_153"></a>Step 1.2 - Securing transactions</h3>
<p class="has-line-data" data-line-start="155" data-line-end="159">Because anybody can add transactions to the ledger, we should make sure that Bob isn’t allowed to send money to his own<br>
account on behalf of Alice. That is to say, Bob shouldn’t be able to add “Alice sends Bob 10 BTC” to the ledger - only<br>
Alice can add such a message. To that end, we will add a Digital Signature to each transaction, and we will update our<br>
ruleset with the following rule: “Only signed transactions are allowed on the ledger.”</p>
<ul>
<li class="has-line-data" data-line-start="160" data-line-end="161">The ledger must be publicly available</li>
<li class="has-line-data" data-line-start="161" data-line-end="162">Anyone can add transactions to the ledger</li>
<li class="has-line-data" data-line-start="162" data-line-end="163">Everyone must agree on the ledger’s contents</li>
<li class="has-line-data" data-line-start="163" data-line-end="164">No one is allowed to spend more money than they have</li>
<li class="has-line-data" data-line-start="164" data-line-end="166"><strong>Only signed transactions are allowed on the ledger*.</strong></li>
</ul>
<p class="has-line-data" data-line-start="166" data-line-end="167">(* coinbase transactions do not need a signature)</p>
<p class="has-line-data" data-line-start="168" data-line-end="169">Here’s our updated ledger:</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th></th>
<th>Block 0</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>1</td>
<td>Bob receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>Charlie receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>Donna receives 10 BTC</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th></th>
<th>Block 1</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice sends Bob 3 BTC</td>
<td>ALICE</td>
</tr>
<tr>
<td>1</td>
<td>Charlie sends Donna 3 BTC</td>
<td>CHARLIE</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th></th>
<th>Block 2</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Bob sends Charlie 12 BTC</td>
<td>BOB</td>
</tr>
</tbody>
</table>
<h3 class="code-line" data-line-start=186 data-line-end=187><a id="Step_2__Immutability_186"></a>Step 2 - Immutability</h3>
<p class="has-line-data" data-line-start="188" data-line-end="192">In order to ensure consistency across time, we need to make sure that no one can go back and change history. Right now,<br>
within the given system, there’s nothing stopping Charlie from simply removing his transaction in Block 1 from the<br>
chain, and keeping the BTC he was supposed to send Donna. Right now, we must <em>trust</em> that he won’t do that. So let’s<br>
find a way to remove that trust requirement - we want to deal with strangers, after all.</p>
<h3 class="code-line" data-line-start=193 data-line-end=194><a id="Step_21__Securing_a_block_193"></a>Step 2.1 - Securing a block</h3>
<p class="has-line-data" data-line-start="195" data-line-end="199">We need a way to verify that the contents of a block were not changed. This is where hashing comes in handy. Rather than<br>
give each block an index, lets give it an actual name. Let’s calculate that name by putting the contents of the block<br>
into our Secure Hash Algorithm, SHA-256. As we discussed before, any change, even a small one, to the contents of our<br>
block will cause its hash to change. For the purpose of brevity, I’ll be using a truncated hash.</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>9a8007</th>
<th>Block 0</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>1</td>
<td>Bob receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>Charlie receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>Donna receives 10 BTC</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>8eb412</th>
<th>Block 1</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice sends Bob 3 BTC</td>
<td>ALICE</td>
</tr>
<tr>
<td>1</td>
<td>Charlie sends Donna 3 BTC</td>
<td>CHARLIE</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>3098ea</th>
<th>Block 2</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Bob sends Charlie 12 BTC</td>
<td>BOB</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="216" data-line-end="220">Now, we can be sure that if someone tries to retroactively modify a block, that we can compare its hash against the one<br>
we know in order to be sure of its contents. However, this has two significant vulnerabilities. First, it relies on me<br>
having an existing copy of the blockchain to compare against. Second, it doesn’t stop anyone from removing a block<br>
entirely.</p>
<h3 class="code-line" data-line-start=221 data-line-end=222><a id="Step_22__Securing_the_chain_221"></a>Step 2.2 - Securing the chain</h3>
<p class="has-line-data" data-line-start="223" data-line-end="226">Fortunately, these two issues can both be resolved by the same simple solution. Rather than referring to blocks by<br>
index, let’s refer to them by their hash. In order to maintain the order of blocks, each block will begin with the name<br>
of the previous block.</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>prev    </th>
<th>current                           </th>
</tr>
</thead>
<tbody></tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>000000</th>
<th>9a8007</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>1</td>
<td>Bob receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>Charlie receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>Donna receives 10 BTC</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>9a8007</th>
<th>8eb412</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice sends Bob 3 BTC</td>
<td>ALICE</td>
</tr>
<tr>
<td>1</td>
<td>Charlie sends Donna 3 BTC</td>
<td>CHARLIE</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>8eb412</th>
<th>3098ea</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Bob sends Charlie 12 BTC</td>
<td>BOB</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="246" data-line-end="247">Now, if someone tries to manipulate or remove a block, the entire chain will break.</p>
<h3 class="code-line" data-line-start=248 data-line-end=249><a id="Step_3__Consensus_248"></a>Step 3 - Consensus</h3>
<p class="has-line-data" data-line-start="250" data-line-end="254">We’ve come a long way from the start, but we still have one important question - how do we get everyone to agree on the<br>
same chain? In order for this to work, we need to have everyone agree on what transactions belong in which block and in<br>
what order, and which blocks come before or after which other blocks. We’ve established a way to verify the<br>
<em>validity</em> of block and the <em>validity</em> of the order, but not on how to <em>agree</em> on such blocks or such order.</p>
<h3 class="code-line" data-line-start=255 data-line-end=256><a id="Step_31__Survival_of_the_Fittest_255"></a>Step 3.1 - Survival of the Fittest</h3>
<p class="has-line-data" data-line-start="257" data-line-end="260">At present, if Alice adds a couple blocks containing some set of transactions (6899be, and 37135d), and at the same<br>
time, Donna adds a block containing some other set of transactions (20a6d6), we’ll have a fork - two separate chains,<br>
each with different endings:</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th></th>
<th>Alice’s Chain</th>
<th>Donna’s Chain</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>9a8007</td>
<td>9a8007</td>
</tr>
<tr>
<td>1</td>
<td>8eb412</td>
<td>8eb412</td>
</tr>
<tr>
<td>2</td>
<td>3098ea</td>
<td>3098ea</td>
</tr>
<tr>
<td>3</td>
<td><strong>6899be</strong></td>
<td><strong>20a6d6</strong></td>
</tr>
<tr>
<td>3</td>
<td><strong>37135d</strong></td>
<td></td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="269" data-line-end="270">Let’s add one more rule to our list: Only the longest chain survives.</p>
<ul>
<li class="has-line-data" data-line-start="271" data-line-end="272">The ledger must be publicly available</li>
<li class="has-line-data" data-line-start="272" data-line-end="273">Anyone can add transactions to the ledger</li>
<li class="has-line-data" data-line-start="273" data-line-end="274">Everyone must agree on the ledger’s contents</li>
<li class="has-line-data" data-line-start="274" data-line-end="275">No one is allowed to spend more money than they have</li>
<li class="has-line-data" data-line-start="275" data-line-end="276">Only signed transactions are allowed on the ledger*.</li>
<li class="has-line-data" data-line-start="276" data-line-end="278"><strong>Only the longest chain survives</strong></li>
</ul>
<p class="has-line-data" data-line-start="278" data-line-end="279">This will help us to agree on which fork to use, but only a little.</p>
<h3 class="code-line" data-line-start=280 data-line-end=281><a id="Step_32__Work_for_it_mining_280"></a>Step 3.2 - Work for it (mining)</h3>
<p class="has-line-data" data-line-start="282" data-line-end="286">If someone wanted to control the blockchain at this point, all it would take is endlessly adding blocks faster than<br>
anyone else. The person who could do this would always be in control of which transactions did and did not make it onto<br>
the public ledger. They could also go back in time and remove existing transactions from blocks, and then recalculate<br>
the rest of the blockchain so as to once again become the longest chain.</p>
<p class="has-line-data" data-line-start="287" data-line-end="293">So, let’s make it difficult to add blocks onto the ledger. The concept of Proof of Work has actually been around for<br>
quite some time, dating back to 1993, originally conceptualized as a way to fight email spam. The concept is this - we<br>
need to design a puzzle that is computationally difficult to solve, but very easy to check. For example, a Rubik’s Cube<br>
with 10,000 faces on each side is difficult to solve, but once it has been solved, the solution is easy to check (all<br>
faces have the same color). In cryptographic terms, we call this a “Proof of Work.” In order to solve the puzzle, you<br>
must expend some amount of computational resources, in order to impose a cost.</p>
<p class="has-line-data" data-line-start="294" data-line-end="295">So, let’s put a new rule in place: Blocks must be “solved” before being added to the chain.</p>
<ul>
<li class="has-line-data" data-line-start="296" data-line-end="297">The ledger must be publicly available</li>
<li class="has-line-data" data-line-start="297" data-line-end="298">Anyone can add transactions to the ledger</li>
<li class="has-line-data" data-line-start="298" data-line-end="299">Everyone must agree on the ledger’s contents</li>
<li class="has-line-data" data-line-start="299" data-line-end="300">No one is allowed to spend more money than they have</li>
<li class="has-line-data" data-line-start="300" data-line-end="301">Only signed transactions are allowed on the ledger*.</li>
<li class="has-line-data" data-line-start="301" data-line-end="302">Only the longest chain survives</li>
<li class="has-line-data" data-line-start="302" data-line-end="304"><strong>Only “solved” blocks are allowed</strong></li>
</ul>
<p class="has-line-data" data-line-start="304" data-line-end="312">Before proceeding, we need to define what a “solved” block looks like. This is where our friend SHA-256 comes in handy<br>
once again. A single hash is fairly easy to compute, but millions (or billions, trillions, etc.) of them are much more<br>
difficult to compute. Since a block’s name is a hash of all its contents, lets add a new field to our block called<br>
“nonce” (number used only once), and say that a block is considered “solved” when its hash begins with 10 0’s. This<br>
field is important, because without it, there would be no way to solve the block. This field allows us to essentially<br>
make the block’s name anything we want. One small change to this nonce gives the block a completely new name, and this<br>
field’s only purpose is to give us a way to change the name of a block without really changing its content. The process<br>
of solving a block is called “mining.”</p>
<p class="has-line-data" data-line-start="313" data-line-end="317">With this new restriction, we can be sure that anyone adding a block to the blockchain has gone through some real-world<br>
expense to do so, and we can verify that expense easily. While this doesn’t ensure that some specific cost has been<br>
incurred on every block, it is a good average. Attempting to manipulate the blockchain becomes a very expensive venture,<br>
as you would have to consistently outperform all other participants.</p>
<p class="has-line-data" data-line-start="318" data-line-end="321">Furthermore, we can easily adjust the difficulty of adding a new block by requiring more or fewer 0’s at the beginning<br>
of a block’s name. It may be worth noting that choosing “0” as a signal is entirely arbitrary, we could have chosen any<br>
value.</p>
<p class="has-line-data" data-line-start="322" data-line-end="324">The Bitcoin protocol is designed to target an average of adding 1 block every 10 minutes. The difficulty of how many 0’s<br>
are required is adjusted every 2016 blocks (about 2 weeks) based on the current overall hash rate of the network.</p>
<p class="has-line-data" data-line-start="325" data-line-end="326">Here’s what our block chain looks like now:</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Prev block</th>
<th>Current Block</th>
<th>Nonce</th>
</tr>
</thead>
<tbody></tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>000000</th>
<th>000…234be2</th>
<th>1a2a3c</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>1</td>
<td>Bob receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>Charlie receives 10 BTC</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>Donna receives 10 BTC</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>234be2</th>
<th>000…bb608c</th>
<th>4d5e6f</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Alice sends Bob 3 BTC</td>
<td>ALICE</td>
</tr>
<tr>
<td>1</td>
<td>Charlie sends Donna 3 BTC</td>
<td>CHARLIE</td>
</tr>
</tbody>
</table>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>bb608c</th>
<th>000…2934df</th>
<th>7g8h9i</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Bob sends Charlie 12 BTC</td>
<td>BOB</td>
</tr>
</tbody>
</table>
<h3 class="code-line" data-line-start=346 data-line-end=347><a id="Analyzing_the_Solution_346"></a>Analyzing the Solution</h3>
<p class="has-line-data" data-line-start="348" data-line-end="350">And that’s basically it. We’ve invented Bitcoin. There’s a lot more that goes on, technically speaking, but that’s the<br>
big picture of how “The Blockchain” works in the context of Bitcoin. We’ve created a system where</p>
<ul>
<li class="has-line-data" data-line-start="351" data-line-end="352">Each person can keep their own copy of the ledger</li>
<li class="has-line-data" data-line-start="352" data-line-end="353">Each person can broadcast their own transactions</li>
<li class="has-line-data" data-line-start="353" data-line-end="354">Everyone can agree on the order of transactions</li>
<li class="has-line-data" data-line-start="354" data-line-end="355">Each person can individually verify the validity and authenticity of each transaction</li>
<li class="has-line-data" data-line-start="355" data-line-end="356">Each person can individually verify the validity and authenticity of each block</li>
<li class="has-line-data" data-line-start="356" data-line-end="357">Each person can individually verify the validity of the chain as a whole</li>
<li class="has-line-data" data-line-start="357" data-line-end="358">No trust of any centralized authority is required</li>
<li class="has-line-data" data-line-start="358" data-line-end="360">No centralized authority (or individual participant) has the ability to control or censor the network</li>
</ul>
<h3 class="code-line" data-line-start=360 data-line-end=361><a id="Things_we_missed_360"></a>Things we missed</h3>
<p class="has-line-data" data-line-start="362" data-line-end="363">While that was most of the big picture stuff, I glossed over a lot of details.</p>
<ul>
<li class="has-line-data" data-line-start="364" data-line-end="365">Nodes</li>
<li class="has-line-data" data-line-start="365" data-line-end="366">Wallets</li>
<li class="has-line-data" data-line-start="366" data-line-end="367">Transactions / UTXOs</li>
<li class="has-line-data" data-line-start="367" data-line-end="368">Confirmations</li>
<li class="has-line-data" data-line-start="368" data-line-end="370">Merkle Trees</li>
</ul>
<hr>
<h2 class="code-line" data-line-start=373 data-line-end=374><a id="Nodes_373"></a>Nodes</h2>
<p class="has-line-data" data-line-start="375" data-line-end="376">Originally, all parts of Bitcoin were done by the same software, running on CPUs, and these computers were called Nodes.</p>
<ul>
<li class="has-line-data" data-line-start="377" data-line-end="378">Wallet application</li>
<li class="has-line-data" data-line-start="378" data-line-end="379">Consensus Rules - verifying block validity, create (not solve) new blocks</li>
<li class="has-line-data" data-line-start="379" data-line-end="380">P2P Network - connect to other bitcoin nodes, listen/send transactions</li>
<li class="has-line-data" data-line-start="380" data-line-end="381">Mining - solve new blocks</li>
</ul>
<p class="has-line-data" data-line-start="383" data-line-end="386">Over time, people realized that Graphics Processing Units (GPUs, or Graphics Cards) were significantly more<br>
effective at mining than CPUs, so miners began to write software meant only mine, and to utilize the maximum<br>
capabilities of GPU processing for hashing. So mining was split off as a separate task from the rest of the node.</p>
<p class="has-line-data" data-line-start="387" data-line-end="388">Nodes (CPU):</p>
<ul>
<li class="has-line-data" data-line-start="388" data-line-end="389">Wallet</li>
<li class="has-line-data" data-line-start="389" data-line-end="390">Consensus</li>
<li class="has-line-data" data-line-start="390" data-line-end="392">P2P</li>
</ul>
<p class="has-line-data" data-line-start="392" data-line-end="393">Miners (GPU)</p>
<ul>
<li class="has-line-data" data-line-start="393" data-line-end="395">Mining</li>
</ul>
<p class="has-line-data" data-line-start="395" data-line-end="399">Eventually, even GPUs were not good enough for the miners. Now, they use something called an ASIC - Application<br>
Specific Integrated Circuit. Basically, took all the benefits of a GPU (tons of tiny processors), stripped out the<br>
general-purpose compute power, and maximized efficiency towards hashing. This hardware is better than GPUs by about<br>
a millionfold. They are also more energy-efficient for hashing than GPUs.</p>
<p class="has-line-data" data-line-start="401" data-line-end="405">While this is generally still the model, there also now exist Light Nodes, which are the same thing as Full Nodes,<br>
but they only perform partial-consensus (verify <em>your</em> transactions, rather than <em>all</em> transactions). These are more<br>
performant, but also since they do not verify the entire blockchain, still require some level of trust. They are<br>
typically used for mobile wallet applications.</p>
<hr>
<hr>
<h2 class="code-line" data-line-start=409 data-line-end=410><a id="Wallets_409"></a>Wallets</h2>
<p class="has-line-data" data-line-start="411" data-line-end="412">What is a Bitcoin wallet, and does it work the same way as a regular billfold?</p>
<p class="has-line-data" data-line-start="413" data-line-end="422">The term wallet is a good analogy, but there are some important differences between physical wallets and bitcoin<br>
wallets. With a physical wallet, when you put dollar bill in there, you physically hold that dollar. With a bitcoin<br>
wallet, you really only ever hold <em>access</em> to any bitcoin you may have. It’s a little closer to a bank account than a<br>
wallet - you don’t physically posses the dollars in your account, but you do retain access to them, namely, the ability<br>
to withdraw or spend those dollars. Consider this - if you cross a border with a cash wallet, have you brought money<br>
across that border? Yes, definitively. On the other hand, if you cross a border with a bitcoin wallet, has the bitcoin<br>
actually crossed that border? Not really. In some sense, it’s like asking if your Facebook status has crossed the<br>
border. The question doesn’t really make sense, because it exists digitally, everywhere. If you cross a border, does all<br>
the money in your bank account move with you? No, not really.</p>
<h3 class="code-line" data-line-start=423 data-line-end=424><a id="What_does_wallet_software_do_423"></a>What does wallet software do?</h3>
<p class="has-line-data" data-line-start="425" data-line-end="429">Wallet software is what allows you to generate a bitcoin wallet, receive funds, sign and broadcast transactions, and<br>
depending on the software you use, it may also download the whole blockchain and verify its validity. Wallet software<br>
typically comes in the form of an app on the app store for mobile devices, or as a downloadable application for laptop<br>
or desktop computers.</p>
<h3 class="code-line" data-line-start=430 data-line-end=431><a id="Creating_a_wallet_430"></a>Creating a wallet</h3>
<p class="has-line-data" data-line-start="432" data-line-end="435">Moving beyond the philosophical implications of where data exists, it is generally appropriate to consider a bitcoin<br>
wallet a key. In fact, that’s exactly what it is. When you generate a bitcoin wallet, what you’re really doing is<br>
generating a private key. Here’s how it works</p>
<ol>
<li class="has-line-data" data-line-start="436" data-line-end="437">You click “Generate new wallet” within your wallet software</li>
<li class="has-line-data" data-line-start="437" data-line-end="439">A backup Seed Phrase is generated (generally a dozen words)
<ol>
<li class="has-line-data" data-line-start="438" data-line-end="439">This seed phrase is used to re-create your private key if you ever lose it. KEEP THIS SAFE AND SECURE.</li>
</ol>
</li>
<li class="has-line-data" data-line-start="439" data-line-end="442">The Seed Phrase is used to generate a cryptographic Private Key
<ol>
<li class="has-line-data" data-line-start="440" data-line-end="442">This key is how you access your bitcoin. Controlling this is analagous to possessing a cash wallet, and the money<br>
it contains.</li>
</ol>
</li>
<li class="has-line-data" data-line-start="442" data-line-end="443">The Private Key is then used to generate a Public Key</li>
<li class="has-line-data" data-line-start="443" data-line-end="447">The Public Key is then used to generate a Wallet Address
<ol>
<li class="has-line-data" data-line-start="444" data-line-end="445">This is how you receive funds, addresses are public</li>
<li class="has-line-data" data-line-start="445" data-line-end="447">A public key can generate many wallet addresses</li>
</ol>
</li>
</ol>
<h3 class="code-line" data-line-start=447 data-line-end=448><a id="Securing_your_wallet_447"></a>Securing your wallet</h3>
<p class="has-line-data" data-line-start="449" data-line-end="453">As mentioned above, possession of your private keys is tantamount to ownership of your bitcoin. If someone else can<br>
access your private keys, they can sign transactions on your behalf. For this reason, securing your private keys is<br>
particularly important. Usually, this comes in the form of storing them as a file on a secure flash drive, or using a<br>
hardware wallet (explained below).</p>
<p class="has-line-data" data-line-start="454" data-line-end="457">If your keys become compromised, you may be able to secure your bitcoin by quickly generating a new bitcoin wallet<br>
(and thus a new set of private keys), and sending all of your balance from your old wallet to your new wallet. As long<br>
as you do this before an attacker does, you can safely secure your bitcoin at only the cost of a miner’s fee.</p>
<h3 class="code-line" data-line-start=458 data-line-end=459><a id="Types_of_wallets_458"></a>Types of wallets</h3>
<p class="has-line-data" data-line-start="460" data-line-end="461">There are 3 types of wallets to manage your bitcoin - custodial wallets, software wallets, and hardware wallets.</p>
<h4 class="code-line" data-line-start=462 data-line-end=463><a id="Custodial_wallets_462"></a>Custodial wallets</h4>
<p class="has-line-data" data-line-start="464" data-line-end="468">Custodial wallets are the kind used on trading exchanges like Coinbase, Binance, etc. It is where your private keys are<br>
actually managed not by you, but by some trusted third party (i.e. Coinbase, Binance, etc). You access your account<br>
balances and manage transactions not by unlocking/signing them with your private keys, but by a username and password,<br>
and sending a signal to the custodian of your wallet to sign a transaction on your behalf.</p>
<p class="has-line-data" data-line-start="469" data-line-end="470">The trade-offs of custodial wallets:</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>pros</th>
<th>cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Easy to use</td>
<td>Requires trust</td>
</tr>
<tr>
<td>Good for high trade volume when exchanging between currencies</td>
<td>No privacy</td>
</tr>
<tr>
<td></td>
<td>Security is determined by custodian</td>
</tr>
<tr>
<td></td>
<td><em><strong>You don’t control your own bitcoin</strong></em></td>
</tr>
</tbody>
</table>
<h3 class="code-line" data-line-start=478 data-line-end=479><a id="Software_wallets_478"></a>Software wallets</h3>
<p class="has-line-data" data-line-start="480" data-line-end="484">The next type of wallet is a software wallet. While technically speaking all wallets are software wallets, the term is<br>
generally applied to a wallet that you control, rather than a custodial wallet. These wallets are typically apps from<br>
the app store, or downloaded applications from a website. There are many different wallet softwares out there, each with<br>
various features. Examples include Electrum, Bitcoin Core, Wasabi, and Samourai.</p>
<p class="has-line-data" data-line-start="485" data-line-end="486">Trade-offs of software wallets:</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>pros</th>
<th>cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fairly easy to use</td>
<td>Keys are only as secure as you can keep them</td>
</tr>
<tr>
<td>Free</td>
<td></td>
</tr>
<tr>
<td>Control your own bitcoin</td>
<td></td>
</tr>
<tr>
<td>Wide array of features</td>
<td></td>
</tr>
<tr>
<td>More privacy</td>
<td></td>
</tr>
</tbody>
</table>
<h3 class="code-line" data-line-start=495 data-line-end=496><a id="Hardware_wallets_495"></a>Hardware wallets</h3>
<p class="has-line-data" data-line-start="497" data-line-end="506">The third type of wallet is a Hardware wallet. These take the form of a dedicated hardware device (not just a flash<br>
drive) where the private keys are generated and stored, with the purpose of keeping them air-gapped from any computer.<br>
To sign a transaction, you use some wallet software to generate the transaction (send X amount of BTC to Y address),<br>
communicate the unsigned transaction to the hardware wallet (USB, MicroSD, etc), and the device will sign the<br>
transaction, and then communicate the signed transaction back to the wallet software in order to verify and broadcast.<br>
In this way, even a computer infected with malicious software would not be able to collect your private keys - they<br>
never leave the device. These are the most secure, and often require a PIN code before signing transactions, and have a<br>
wide array of security features to ensure that even if someone acquires your hardware wallet, only you can sign a<br>
transaction. Examples include ColdCard, OpenDime, Trezor, Ledger, and KeepKey.</p>
<p class="has-line-data" data-line-start="507" data-line-end="508">Trade-offs of hardware wallets</p>
<ul>
<li class="has-line-data" data-line-start="509" data-line-end="510">More difficult to use</li>
<li class="has-line-data" data-line-start="510" data-line-end="511">Control your own bitcoin</li>
<li class="has-line-data" data-line-start="511" data-line-end="512">Expensive</li>
<li class="has-line-data" data-line-start="512" data-line-end="515">Keys are super secure
<ul>
<li class="has-line-data" data-line-start="513" data-line-end="515">Make sure not to lose it</li>
</ul>
</li>
</ul>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>pros</th>
<th>cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Control your own bitcoin</td>
<td>More difficult to use</td>
</tr>
<tr>
<td>Keys are super secure</td>
<td>Expensive</td>
</tr>
</tbody>
</table>
<hr>
<hr>
<h2 class="code-line" data-line-start=523 data-line-end=524><a id="Transactions_and_UTXOs_523"></a>Transactions, and UTXOs</h2>
<p class="has-line-data" data-line-start="525" data-line-end="529">So how is a person’s bitcoin “balance” calculated? We can determine this by calculating the value of any Unspent<br>
Transaction Outputs (UTXOs) that point to them. This works in essentially the same way as your bank will determine what<br>
your account balance is, with some minor technical differences. Let’s compare the two. For the purpose of this lesson,<br>
let us assume that 1 BTC = $100</p>
<hr>
<p class="has-line-data" data-line-start="532" data-line-end="534">When Alice opens an account, she deposits a certain amount of cash, say $1000. Alice also decides to invest in Bitcoin,<br>
starting off with 10 BTC.</p>
<h4 class="code-line" data-line-start=535 data-line-end=536><a id="Classical_bank_535"></a>Classical bank:</h4>
<p class="has-line-data" data-line-start="537" data-line-end="539">After alice hands $1000 to a clerk, the bank will open an account in Alice’s name, and add a record describing $1000<br>
being added to Alice’s account.</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Account Name</th>
<th>Amount</th>
<th>Notes</th>
<th>Available Balance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice</td>
<td>1000</td>
<td>Initial Deposit</td>
<td>1000</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="544" data-line-end="545">Alice now has one “Unspent Transaction Output” (UTXO) in the amount of $1000 at her disposal.</p>
<h4 class="code-line" data-line-start=546 data-line-end=547><a id="Blockchain_546"></a>Blockchain:</h4>
<p class="has-line-data" data-line-start="548" data-line-end="549">After Alice hands him some cash, Bob sends 10 BTC to Alice</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Sender</th>
<th>Recipient</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xb0345 (Bob)</td>
<td>0xa1234 (Alice)</td>
<td>10</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="554" data-line-end="557">Again, Alice now has one UTXO in the amount of 10 BTC at her disposal. On a technical level, the “ID” would actually be<br>
a single-use wallet address, but I’ve abstracted the technicals of how wallets work for the purposes of this lesson. The<br>
purpose is to identify which coins are being spent in which transactions.</p>
<hr>
<p class="has-line-data" data-line-start="562" data-line-end="564">Alice then spends $50 at Target. This is where things start to differ between classical banking and the blockchain.<br>
While the conclusion is the same, there are some very important differences in the nature of how these records are kept.</p>
<h4 class="code-line" data-line-start=565 data-line-end=566><a id="Classical_bank_565"></a>Classical bank:</h4>
<p class="has-line-data" data-line-start="567" data-line-end="569">Here, the bank will describe a record in the amount of “-$50,” and calculate her Available Balance by adding up the<br>
“+1000” and the “-50.”</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Account Name</th>
<th>Amount</th>
<th>Notes</th>
<th>Available Balance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice</td>
<td>1000</td>
<td>Initial Deposit</td>
<td>1000</td>
</tr>
<tr>
<td>Alice</td>
<td>-50</td>
<td>Purchase at Target</td>
<td>950</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="575" data-line-end="580">Target will then independently record a transaction of “+$50.” For now, we’ll focus only on the bank’s records, though<br>
consider now how significant it is that both Target and the Bank are keeping accurate transaction records, regarding the<br>
total Money Supply of USD. While there are built in validation and correction measures in this form of accounting, these<br>
records are still ultimately susceptible to both human error and intentional corruption. Does anyone even know how many<br>
USD there are, or where they are?</p>
<h4 class="code-line" data-line-start=581 data-line-end=582><a id="Blockchain_581"></a>Blockchain:</h4>
<p class="has-line-data" data-line-start="583" data-line-end="585">On the blockchain, such a transaction would take the form of Alice “spending” the entire output of the previous<br>
transaction, and sending part of the output to Target, and the rest of the output to herself as a “change output.”</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Sender</th>
<th>Recipient</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xb0345 (Bob)</td>
<td>0xa1234 (Alice)</td>
<td>10</td>
</tr>
<tr>
<td>0xa1234 (Alice)</td>
<td>0xdb902 (Target), 0xa4321 (Alice)</td>
<td>0.5, 9.5</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="591" data-line-end="595">Notice how there are multiple recipients for the single transaction. This means that there are now two Unspent<br>
Transaction Outputs (UTXO) on this ledger. The entirety of Alice’s first transaction (10BTC) has been spent, but she now<br>
has a new UTXO of 9.5 BTC (a ‘change output’), representing the “unspent” portion of her original 10BTC, or the<br>
‘change’. The second UTXO belongs to Target.</p>
<p class="has-line-data" data-line-start="596" data-line-end="598">This is similar to handing the cashier $1000, and getting back $950 - the original $1000 has been ‘spent’, but you<br>
receive back the ‘unspent’ portion in the form of new (to you) dollar bills.</p>
<p class="has-line-data" data-line-start="599" data-line-end="603">If you look carefilly, you will also see that the recipient address for Alice’s change output is different than her<br>
initial address. This is because when sending bitcoin to a wallet address, a single-use transaction address is<br>
generated. In this way, you can trace each specific transaction output, and determine which have been spent, and which<br>
haven’t. If a transaction output is used as an input to another transaction, then you know that it has been spent.</p>
<p class="has-line-data" data-line-start="604" data-line-end="608">Additionally, notice now how we are no longer relying on Target to keep accurate records of their accounting - everyone<br>
participating on the bitcoin network can verify the amount of coin that Target has received and spent. It also means<br>
that in order to calculate the balance of your account/wallet (or any entity’s balance), you need to look through the<br>
entire blockchain.</p>
<hr>
<p class="has-line-data" data-line-start="611" data-line-end="613">Using the materials she purchased at Target, Alice produced a widget, and sold it to Bob for $100. Let’s compare ledgers<br>
again:</p>
<h4 class="code-line" data-line-start=614 data-line-end=615><a id="Classical_bank_614"></a>Classical bank:</h4>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Account Name</th>
<th>Amount</th>
<th>Notes</th>
<th>Available Balance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice</td>
<td>1000</td>
<td>Initial Deposit</td>
<td>1000</td>
</tr>
<tr>
<td>Alice</td>
<td>-50</td>
<td>Purchase at Target</td>
<td>950</td>
</tr>
<tr>
<td>Alice</td>
<td>100</td>
<td>Deposit from Bob</td>
<td>1050</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="622" data-line-end="623">A single new entry has been added representing a $100 increase, and Alice’s new balance is calculated.</p>
<h4 class="code-line" data-line-start=624 data-line-end=625><a id="Blockchain_624"></a>Blockchain:</h4>
<p class="has-line-data" data-line-start="626" data-line-end="628">For clarity, I will rename the “sender” and “recipient” fields to “Input” and “Output,” respectively. This is a more<br>
technical description of the fields.</p>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Input</th>
<th>Output</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xb0345 (Bob)</td>
<td>0xa1234 (Alice)</td>
<td>10</td>
</tr>
<tr>
<td>0xa1234 (Alice)</td>
<td>0xdb902 (Target), 0xa4321 (Alice)</td>
<td>0.5, 9.5</td>
</tr>
<tr>
<td>0xb80c4 (Bob)</td>
<td>0xa6c54 (Alice)</td>
<td>1</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="636" data-line-end="639">Again, a new recipient address is visible from Alice (and a new sender address from Bob, as well). Now Alice has two<br>
UTXOs - one from Bob for 1 BTC, and 1 from herself (change output) for 9.5 BTC. Her total available balance is the<br>
sum of all UTXOs - so 10.5 BTC.</p>
<hr>
<p class="has-line-data" data-line-start="642" data-line-end="643">Finally, the new TV that Alice wanted is on sale for $1000, so she goes and buys it. Let’s compare ledgers once more:</p>
<h4 class="code-line" data-line-start=645 data-line-end=646><a id="Classical_bank_645"></a>Classical bank:</h4>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Account Name</th>
<th>Amount</th>
<th>Notes</th>
<th>Available Balance</th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice</td>
<td>1000</td>
<td>Initial Deposit</td>
<td>1000</td>
</tr>
<tr>
<td>Alice</td>
<td>-50</td>
<td>Purchase at Target</td>
<td>950</td>
</tr>
<tr>
<td>Alice</td>
<td>100</td>
<td>Deposit from Bob</td>
<td>1050</td>
</tr>
<tr>
<td>Alice</td>
<td>-1000</td>
<td>Purchase at Best Buy</td>
<td>50</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="654" data-line-end="655">A single new entry has been added representing a $1000 decrease, and Alice’s new balance is calculated.</p>
<h4 class="code-line" data-line-start=656 data-line-end=657><a id="Blockchain_656"></a>Blockchain:</h4>
<table class="table table-striped table-bordered">
<thead>
<tr>
<th>Input</th>
<th>Output</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td>0xb0345 (Bob)</td>
<td>0xa1234 (Alice)</td>
<td>10</td>
</tr>
<tr>
<td>0xa1234 (Alice)</td>
<td>0xdb902 (Target), 0xa4321 (Alice)</td>
<td>0.5, 9.5</td>
</tr>
<tr>
<td>0xb80c4 (Bob)</td>
<td>0xa6c54 (Alice)</td>
<td>1</td>
</tr>
<tr>
<td>0xa6c54 (Alice) 0xa4321 (Alice)</td>
<td>0xbb901 (Best Buy) 0xac103 (Alice)</td>
<td>10, .5</td>
</tr>
</tbody>
</table>
<p class="has-line-data" data-line-start="665" data-line-end="668">Just as there can be multiple recipients (outputs) in a transaction, there can be senders (inputs) as well. And in<br>
the same way, the total sum of the inputs become spent, and new outputs are generated. Now Alice has only one UTXO<br>
in the amount of .5 BTC</p>
<p class="has-line-data" data-line-start="670" data-line-end="673">This system of tracking transactions allows the entire ledger to be publicly accessible and verifiable. You can<br>
always know what someone’s balance is before they purchase something from you, and you can be certain that their<br>
“checks” won’t bounce.</p>
<hr>
<hr>
<h2 class="code-line" data-line-start=677 data-line-end=678><a id="Confirmations_677"></a>Confirmations</h2>
<p class="has-line-data" data-line-start="679" data-line-end="687">After a user broadcasts their transaction to the bitcoin network, it still hasn’t been “confirmed” yet - that is to<br>
say, it doesn’t appear on the ledger (the blockchain), so in some sense, it hasn’t really “happened” yet. The way<br>
for a transaction to be confirmed is to be included in a block that is then solved and added to the blockchain. Each<br>
new block that is then considered another “confirmation” - you typically want to wait for about 4-6 confirmations<br>
before trusting a transaction, possibly longer for larger transactions. This is because in the short term, there may<br>
be competing forks of the blockchain - two different miners solving blocks at about the same time, potentially with<br>
different transactions. If you don’t wait for additional confirmations, then its possible you may lose your<br>
transaction if another miner solves multiple blocks very quickly, and those blocks contain different transactions.</p>
<hr>
<hr>
<h2 class="code-line" data-line-start=691 data-line-end=692><a id="References_and_Relevant_Links_691"></a>References and Relevant Links</h2>
<ul>
<li class="has-line-data" data-line-start="693" data-line-end="695"><em>Bitcoin Clarity</em>, by Kiara Bickers -<br>
on <a href="https://www.amazon.com/Bitcoin-Clarity-Complete-Beginners-Understanding/dp/1733871209/">Amazon</a></li>
<li class="has-line-data" data-line-start="695" data-line-end="696"><a href="https://www.youtube.com/watch?v=bBC-nXj3Ng4">But how does Bitcoin actually work?</a>, 3Blue1Brown</li>
</ul>
</div>
</body></html>
